From 709150a1ffa7335368331257ef95f6512166986b Mon Sep 17 00:00:00 2001
From: Tim S <tim.stahlhut@gmail.com>
Date: Fri, 25 Jan 2019 11:41:46 -0500
Subject: [PATCH] msys2

---
 config/config.guess      | 3 +++
 lib/autoconf/specific.m4 | 2 +-
 tests/local.at           | 2 +-
 3 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/config/config.guess b/config/config.guess
index 500ee74..1d07e43 100644
--- a/config/config.guess
+++ b/config/config.guess
@@ -771,6 +771,9 @@ EOF
     i*:CYGWIN*:*)
 	echo ${UNAME_MACHINE}-pc-cygwin
 	exit 0 ;;
+    i*:MSYS*:*)
+	echo ${UNAME_MACHINE}-pc-msys
+	exit 0 ;;
     i*:MINGW*:*)
 	echo ${UNAME_MACHINE}-pc-mingw32
 	exit 0 ;;
diff --git a/lib/autoconf/specific.m4 b/lib/autoconf/specific.m4
index 9b57442..ade4234 100644
--- a/lib/autoconf/specific.m4
+++ b/lib/autoconf/specific.m4
@@ -357,7 +357,7 @@ AU_DEFUN([AC_CYGWIN],
 AC_DIAGNOSE([obsolete],
 	    [$0 is obsolete: use AC_CANONICAL_HOST and $host_os])dnl
 case $host_os in
-  *cygwin* ) CYGWIN=yes;;
+  *cygwin*  | *msys*) CYGWIN=yes;;
 	 * ) CYGWIN=no;;
 esac
 ])# AC_CYGWIN
diff --git a/tests/local.at b/tests/local.at
index 1494391..5fa4692 100644
--- a/tests/local.at
+++ b/tests/local.at
@@ -186,7 +186,7 @@ m4_defun([AC_STATE_SAVE],
       [^(CC|CFLAGS|CPP|GCC|CXX|CXXFLAGS|CXXCPP|GXX|F77|FFLAGS|FLIBS|G77)=],
       [^(LIBS|LIB@&t@OBJS|LDFLAGS)=],
       [^INSTALL(_(DATA|PROGRAM|SCRIPT))?=],
-      [^(CYGWIN|ISC|MINGW32|MINIX|EMXOS2|XENIX|EXEEXT|OBJEXT)=],
+      [^(CYGWIN|ISC|MSYS|MINGW32|MINIX|EMXOS2|XENIX|EXEEXT|OBJEXT)=],
       [^(X_(CFLAGS|(EXTRA_|PRE_)?LIBS)|x_(includes|libraries)|(have|no)_x)=],
       [^(host|build|target)(_(alias|cpu|vendor|os))?=],
       [^(cross_compiling)=],
-- 
2.19.1.windows.1

